# RabbitMQ
### RabbitMQ 란?
* RabbitMQ는 메시지 브로커로써, 애플리케이션 간 메시지를 송수신하는 데 중개자 역할을 한다.
* **AMQP** (Advanced Message Queuing Protocol)이라는 표준 프로토콜을 기반으로 개발되었으며, 해당 프로토콜을 구현한 메시지 브로커로 애플리케이션, 시스템, 서비스 간의 메시지 전달을 중개하며 **비동기 통신**을 가능하게 한다.

### RabbitMQ 주요 개념
![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fk2sgx%2FbtsJD72nfmb%2FI1VTDTk0HjAPHdwvnXdWqk%2Fimg.png)
1. **Producer**: 메시지를 생성하고 큐에 보낸다.
2. **Exchange**: 프로듀서가 보낸 메시지를 라우팅하여 적절한 큐로 보낸다.
   * **Direct**: 특정 라우팅 키와 일치하는 큐로 메시지 전달
   * **Topic**: 라우팅 키의 패턴 매칭을 통해 메시지를 큐로 라우팅
   * **Fanout**: 라우팅 키와 상관 없이 모든 큐에 메시지를 브로드캐스트
3. **Queue**: 메시지를 저장하는 버퍼로, 컨슈머가 메시지를 가져갈 때까지 보관한다.
4. **Consumer**: 큐에서 메시지를 가져와 처리한다.

### RabbitMQ 장점 (유리한 부분)
1. **실시간 메시지 전송**에 적합하다.
   * RabbitMQ는 지연 시간이 짧고, 빠른 메시지 응답을 제공한다.
   * 예시) 알림 시스템, 주문 처리, 실시간 채팅
2. **다양한 프로토콜 및 메시징 패턴을 지원**한다.
   * AMQP, MQTT, HTTP 등 다양한 프로토콜을 지원하므로 다양한 애플리케이션 환경에서 쉽게 통합할 수 있다.
3. **세부적인 메시지 라우팅**
   * Exchange 타입을 통해 특정 조건에 따라 메시지를 큐로 라우팅할 수 있다.
   * Kafka의 라우팅은 토픽 단위로 단순하게 이루어지는 반면, RabbitMQ는 조건에 따라 다양한 방식으로 큐를 구성할 수 있다.

### RabbitMQ 단점 (Kafka 대비)
1. **처리량이 낮다.**
   * 고속으로 많은 메시지를 처리하는 Kafka에 비해, **처리량이 낮고 확장성이 떨어진다.**
2. **데이터 영속성**에 약하다.
   * Kafka는 디스크에 메시지를 저장하고 보관하는 데 비해, RabbitMQ는 **메시지를 소비하면 큐에서 삭제**된다.
3. **수평 확장**이 어렵다.
   * Kafka는 파티션과 브로커를 통해 수평 확장을 쉽게 할 수 있는데 비해, RabbitMQ는 확장 시 **클러스터링 및 관리가 어렵다.**

### RabbitMQ vs Kafka

|특징|RabbitMQ|Kafka|
|---|---|---|
|**프로토콜**|AMQP, MQTT, HTTP 등 다양한 프로토콜 지원|독자적인 프로토콜 사용 (Kafka 프로토콜)|
|**메시지 모델**|메시지 큐 (Message Queue)|로그 스트림 (Log Stream)|
|**구조**|요청/응답 패턴 (RPC, Pub/Sub)|스트림 기반 데이터 파이프라인|
|**속도**|지연 시간이 짧고 빠른 응답을 제공|대용량 데이터 처리에 강점|
|**데이터 저장**|메시지 소모 후 큐에서 삭제|메시지를 일정 기간 동안 디스크에 저장|
|**라우팅**|Exchange를 사용한 세부 라우팅 가능|라우팅 기능이 단순|
|**처리량**|소규모 시스템이나 실시간 처리에 적합|대규모 데이터 처리에 적합|
|**신뢰성**|`Acknowledgement`와 `Persistence`로 메시지 손실 방지|`Replication`과 `Partitioning`으로 내구성 확보|
|**확장성**|수평적 확장이 상대적으로 복잡|`Partitioning`을 통한 수평 확장이 용이|
|**관리 UI**|웹 기반 UI 제공|별도 도구 필요|
|**사용 사례**|알림, 주문 처리, 실시간 채팅 등 **단기적** 이벤트 처리|로그 수집, 데이터 파이프라인, 실시간 추천 시스템 등 **장기적** 데이터 처리|

