# 서브넷 정리
## 서브넷
IPv4는 초기에 부족한 IP 주소 문제를 해결하기 위해 IP 클래스로 나누어 할당하는 방법을 선택했지만, 이는 오히려 비효율적인 방법이었다.
비효율을 해결하기 위해 IP를 사용하는 네트워크 장치 수에 따라 효율적으로 사용할 수 있는 **서브넷 (Subnet)** 개념이 등장했다.

- **서브넷**: 하나의 네트워크가 분할되어 나눠진 작은 네트워크
- **서브네팅**: 서브넷을 만들기 위해 네트워크를 분할하는 것, 서브네팅을 하면 IP 할당 범위를 더 작은 단위로 쪼갤 수 있다.
- **서브넷 마스크**: 해당 서브네팅은 서브넷 마스크를 통해 계산된다.

## 서브넷 마스크
IP 주소에서 네트워크 ID와 호스트 ID로 구분하기 위한 목적으로 만들어졌다.

### 서브넷 마스크 표현
IP 주소와 똑같은 32bit 2진수로 표현된다.
- 255.255.255.0

IP와 표현이 다른 점은 서브넷 마스크는 연속된 1과 0으로 구성되어 있다는 점이다.  
서브넷 마스크 옥텟이 255이면, Network ID를 가리키게 된다. 따라서 아주 간단하게 IP 주소와 서브넷 마스크를 이용해 IP가 어느 클래스인지 알 수 있다.
- A Class 👉 255.0.0.0
- B Class 👉 255.255.0.0
- C Class 👉 255.255.255.0

### Prefix 표현
서브넷 마스크를 보다 더 간소화해서 표현할 수도 있다.  
비트를 사용한 방법으로, IP 주소가 192.168.0.1/24 라면 뒤에 `/24`가 서브넷 마스크를 표현한 것이다.
`/24`라는 뜻은 32 bit 중 앞에서부터 차례대로 1의 개수가 24개라는 의미이다. 나머지 8개는 0으로 채워주면 서브넷 마스크가 되는 것이다.

```
/24 👉 11111111.11111111.11111111.00000000
```

이런 표현을 사용하면 IP 주소를 입력할 때 `192.168.1.10 255.255.255.0` 을 `192.168.1.10/24`로 간략히 줄일 수 있다.

## 서브네팅
네트워크 성능 보장, 자원을 효율적으로 분배하기 위해 네트워크 영역과 호스트 영역을 쪼개는 작업을 한다.  
자신의 네트워크 주소를 더 작은 서브 네트워크로 2의 배수로 나누는 과정
- 예) 호스트를 50개만 사용하는 기업이 C 클래스인 192.168.10.0/24 IP 주소를 사용한다 하면, 총 256개의 주소를 할당하게 되는데, 256개 전체를 주면 낭비가 되므로 256개의 절반을 나누고 (128개), 또 절반 나눈 (64개) 주소를 기업에게 할당하고, 남는 주소는 다른 사용처로 할당하는 작업

### 서브네팅 계산법
- **주소범위 절반으로 나누기 (2등분)**  
- **주소범위를 4등분 나누기**  
  - 예) 192.168.10.0/24 는 C 클래스로써 사용 가능한 호스트 개수는 256개이다. 이를 4등분하여 64개의 호스트를 가진 서브넷 4개로 나누는 작업
- **주소범위를 복합적으로 나누기**
  - 예) 1층 건물에는 100대의 IP 주소를 할당해야 한다. 👉 7개의 호스트 ID 비트 필요 (2^7 = 128 개)
    2층 건물에는 50대의 IP 주소를 할당해야 한다. 👉 6개의 호스트 IP 비트 필요 (2^6 = 64 개) 단, 1층에 할당하고 남은 128개의 호스트 주소 범위를 쪼개 나눠야 한다.
    3층 건물에는 30대의 IP 주소를 할당해야 한다. 👉 5개의 호스트 IP 비트 필요 (2^5 = 32 개)

## 슈퍼네팅
서브네팅이네트워크를 분할하는 것이였다면, 슈퍼네팅은 반대의 개념이다.  
**네트워크를 합치는 것**을 슈퍼네팅이라 한다.
- 예) 192.168.10.0/24 를 사용하면 192.168.10.0~255 범위에서 브로드캐스트 주소 제외하여 254개의 호스트를 가질 수 있다. 만약 이 네트워크에 추가로 들어와 500개 분의 호스트가 더 필요하게 되었다면?
- 바로 C 클래스 2개를 합쳐 하나의 네트워크로 구성하여 사용할 수 있다.

방법은 서브넷 마스크를 이동시키는 방법이다.  
192.168.10.0/24 에서 192.168.10.0/`23` 으로 **Prefix 숫자를 감소**시킨다.  
Prefix 숫자가 감소한다는 것은 곧 호스트 ID의 개수가 더 늘어난다는 의미이다.  
서브넷 마스크 숫자가 23이 되니, 호스트 ID의 비트 수는 9개가 되고 2^9 = 512 로,
192.168.10.0 ~ 192.168.11.255 의 범위를 갖는다.  
즉 C 클래스 2개를 합쳐, 512 - 2 (특수목적 IP) = 510 개의 호스트를 가질 수 있는 네트워크가 완성된다.