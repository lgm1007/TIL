# IoC (제어의 역전)
### 개념
* 객체지향 프로그래밍에서 객체 생성 및 의존성 관리를 담당하는 디자인 패턴 중 하나
* **메서드나 객체의 호출 작업을 개발자가 결정하지 않고, 외부에서 결정되는 것**
* **객체의 생성, 생명주기 관리, 의존성 관리**를 개발자가 아닌 프레임워크 또는 컨테이너가 담당하도록 하는 디자인 원칙이다.

### 특징
1. **기존 방식과의 차이**
   * 개발자가 객체를 생성하고, 객체 간의 의존성을 직접 관리하며, 객체의 생명주기를 관리해야 하던 기존 방식에서 제어권이 역전되었다.
   * 객체의 생성과 의존성 주입을 프레임워크나 컨테이너에 위임하고, 이런 객체들의 생명주기를 관리할 책임을 컨테이너에게 맡긴다.
2. **의존성 주입**
   * IoC의 핵심
   * 개발자가 직접 객체 간의 의존성을 설정하는 대신, 컨테이너가 필요한 의존성을 객체에 주입한다.
   * 이로 인해 객체 간의 결합도가 낮아지고 재사용성과 테스트 용이성이 향상된다.
3. **컨테이너**
   * IoC를 구현하는 주요 도구
   * 스프링 프레임워크에서는 BeanFactory 또는 ApplicationContext와 같은 컨테이너를 제공한다.
     * 설정 파일이나 어노테이션을 통해 객체들을 정의하고 관리하는 컨테이너
4. **생명주기 관리**
   * 컨테이너는 객체의 생명주기를 관리하며 필요할 때 객체를 생성하고, 필요 없어지면 객체를 소멸시킨다.
   * 이를 통해 메모리 누수나 리소스 누수를 방지할 수 있다.
5. **재사용성**
   * IoC를 통해 객체 간의 결합도가 낮아지므로 코드를 재사용하기 쉬워진다.
   * 의존성 주입을 통해 특정 객체를 교체하거나 확장하기가 용이해진다.
6. **테스트 용이성**
   * 의존성 주입을 통해 테스트할 떄 가짜(Mock) 객체를 주입하거나 테스트용 객체를 쉽게 제어할 수 있다.

### 수행 과정
* 스프링 프레임워크에서는 아래와 같은 순서로 객체가 생성되며 실행된다.
  1. 객체 생성
  2. 의존성 객체 주입 (제어권을 스프링에 위임하여 스프링이 만들어놓은 객체를 주입함)
  3. 의존성 객체 메서드 호출

### 예제
* 스프링 프레임워크에서 xml 설정 파일이나 어노테이션을 사용하여 객체를 정의하고 의존성을 주입한다.
* xml 설정 파일 예제
```xml
<bean id="userService" class="com.example.UserService">
  <property name="userRepository" ref="userRepositry"/>
</bean>
<bean id="userRepository" class="com.example.UserRepository"/>
```
* Java 어노테이션 예제
```java
@Service
public class UserService {
	@Autowired
    private UserRepository userRepository;
	// ...
}
```
